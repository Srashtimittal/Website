<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
      <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
     <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
<link href="https://fonts.googleapis.com/css2?family=Kurale&display=swap" rel="stylesheet">
      <link href="https://fonts.googleapis.com/css2?family=Denk+One&display=swap" rel="stylesheet">

    <title>{% block title%} {% endblock %}</title>
     <style>

nav{
background-image:linear-gradient(to left, #10b9cc , #0b397d);
height:60px;
}
#ko{
margin-left:0;
font-size:31px;
color:white;
font-weight:bold;
font-family: 'Kurale', serif;
}
#gz{
color:white;
font-weight:bold;
}
#g{
color:white;
font-weight:bold;
margin-left:350px;
}
#ml{
color:white;
font-weight:bold;
margin-left:350px;
}
#cx{
color:white;
font-weight:bold;
}
#vv{
color:white;
font-weight:bold;
}
#home{
color:white;
font-size:18px;
font-weight:bold;
}
#home:hover{
color:white;
font-size:21px;
}
#abo{
color:white;
font-size:18px;
font-weight:bold;
}
#abo:hover{
color:white;
font-size:21px;
}
#tra{
color:white;
font-size:18px;
font-weight:bold;
}
#tra:hover{
color:white;
font-size:21px;
}
#cont{
color:white;
font-weight:bold;
font-size:18px;
}
#cont:hover{
color:white;
font-size:21px;
}
.btn-primary{
background-image:linear-gradient(to right, #10b9cc , #0b397d);
border:#5F4B8BFF;
border-radius:4px;
text-decoration:none;
}
  </style>
  </head>
  <body>

    <nav class="navbar navbar-expand-lg ">
        <h3 id="ko"> Mindstrong IT Services Private Limited </h3>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>


      {% if user.is_authenticated %}
      <div class="collapse navbar-collapse" >
      <ul class="navbar-nav mr-auto">
      <li class="nav-item active" id="ml">
          &nbsp; &nbsp;&nbsp; &nbsp;<svg width="1.5em" height="1.5em" viewBox="0 0 16 16" class="bi bi-person-check-fill" fill="white" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" d="M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm9.854-2.854a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L12.5 7.793l2.646-2.647a.5.5 0 0 1 .708 0z"/>
      </svg><br> Hello, <span id="vv">{{ user.first_name }} </span>
      </li>
      </ul>
      </div>
      <div class="collapse navbar-collapse" >
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
       <a class="nav-link" href="/elec/logout"id="cx"> &nbsp; &nbsp; <br>Logout  &nbsp;</a>
      </li>
    </ul>
      </div>
      {% else %}
       <div class="collapse navbar-collapse" >
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
       <a class="nav-link" id="g" href="/elec/login"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<svg width="1.4em" height="1.4em" viewBox="0 0 16 16" class="bi bi-person-circle" fill="white" xmlns="http://www.w3.org/2000/svg">
  <path d="M13.468 12.37C12.758 11.226 11.195 10 8 10s-4.757 1.225-5.468 2.37A6.987 6.987 0 0 0 8 15a6.987 6.987 0 0 0 5.468-2.63z"/>
  <path fill-rule="evenodd" d="M8 9a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
  <path fill-rule="evenodd" d="M8 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1zM0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8z"/>
</svg> <br> Hi! Sign in &nbsp; &nbsp;</a>
      </li>
    </ul>
      </div>
      <div class="collapse navbar-collapse" >
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
       <a class="nav-link" id="gz" href="/elec/register"> <br>Sign up &nbsp; &nbsp;</a>
      </li>
      {% endif %}
    </ul>
      </div>

       <div class="collapse navbar-collapse" >
<button type="button" class="btn btn-primary" id="popcart" data-container="body" data-toggle="popover" data-placement="bottom" data-html="true" data-content="Vivamus
sagittis lacus vel augue laoreet rutrum faucibus.">

  <svg width="1.5em" height="1.5em" viewBox="0 0 16 16" class="bi bi-cart3" fill="white" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .49.598l-1 5a.5.5 0 0 1-.465.401l-9.397.472L4.415 11H13a.5.5 0 0 1 0 1H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l.84 4.479 9.144-.459L13.89 4H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm7 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/>
</svg>   Cart(<span id="cart">0</span>)
</button>
  </div>
</nav>
     <nav class="navbar navbar-expand-lg "  id="navbarSupportedContent">
  <div class="collapse navbar-collapse" >
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
        <a class="nav-link" id="home" href="/"> Home &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;<span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="abo" href="/elec/about"> About Us  &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;</a>
      </li>

      <li class="nav-item">
        <a class="nav-link"id="tra" href="/elec/tracker">Tracker  &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;</a>
      </li>

      <li class="nav-item">
        <a class="nav-link"id="cont" href="/elec/contact">Contact Us  &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;</a>
      </li>


    </ul>
  </div>
     </nav>

<div class="container">
    <div class="col my-4">
        <h2>Review Your Cart Items</h2>
        <div class="my-4">
            <ul class="list-group" id="items">
            </ul>

            <nav aria-label="breadcrumb">
  <ol class="breadcrumb mt-3">
    <li class="breadcrumb-item active" aria-current="page">Your Cart Total Is <b>Rs. <span id="totalPrice"></span></b>. Enter your details below & place your order. Thanks for using My Awesome Cart!</li>
  </ol>
</nav>
        </div>
    </div>
    <div class="col my-4">
        <h2>Enter Address & Other Details:</h2>
        <form method="post" action="/elec/checkout">{% csrf_token %}
            <input type="hidden" name="itemsJson" id="itemsJson">
            <input type="hidden" name="amount" id="amount">
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label for="name">Name</label>
                    <input type="text" class="form-control" id="name" name="name" placeholder="Name">
                </div>
                <div class="form-group col-md-6">
                    <label for="email">Email</label>
                    <input type="email" class="form-control" id="email" name="email" placeholder="Email">
                </div>
            </div>
            <div class="form-group">
                <label for="address1">Address</label>
                <input type="text" class="form-control" id="address1" name="address1" placeholder="1234 Main St">
            </div>
            <div class="form-group">
                <label for="address2">Address line 2</label>
                <input type="text" class="form-control" id="address2" name="address2" placeholder="Apartment, studio, or floor">
            </div>
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label for="city">City</label>
                    <input type="text" class="form-control" id="city" name="city">
                </div>
                <div class="form-group col-md-4">
                    <label for="state">State</label>
                    <input type="text" class="form-control" id="state" name="state"  placeholder="Enter State">
                </div>
                <div class="form-group col-md-2">
                    <label for="zip_code">Zip</label>
                    <input type="text" class="form-control" id="zip_code" name="zip_code">
                </div>
            </div>
            <div class="form-group">
                <label for="phone">Phone Number</label>
                <input type="tel" class="form-control" id="phone" name="phone">
            </div>
            <button type="submit" class="btn btn-primary">Place Order</button>
        </form>
    </div>
</div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
<script>
if (localStorage.getItem('cart') == null) {
    var cart = {};
} else {
    cart = JSON.parse(localStorage.getItem('cart'));
}
console.log(cart);
var sum = 0;
var totalPrice = 0;
if ($.isEmptyObject(cart)) {
    //if object is empty
    mystr = `<p>Your cart is empty, please add some items to your cart before checking out!</p>`
    $('#items').append(mystr);
} else {
    for (item in cart) {
        let name = cart[item][1];
        let qty = cart[item][0];
        let itemPrice = cart[item][2];
        sum = sum + qty;
        totalPrice = totalPrice + qty* itemPrice;
        mystr = `<li class="list-group-item d-flex justify-content-between align-items-center">
                    ${name}
                    <span class="badge badge-primary badge-pill">${qty}</span>
                </li>`
        $('#items').append(mystr);
    }
}
document.getElementById('cart').innerHTML = sum;
document.getElementById('totalPrice').innerHTML = totalPrice;
$('#itemsJson').val(JSON.stringify(cart));
{% if thank %}
alert('Thanks for ordering with us. Your order is is {{id}}. Use it to track your order using our order tracker');
localStorage.clear();
document.location = "/elec/checkout";
{% endif %}
$('#amount').val($('#totalPrice').html())
</script>

  </body>
</html>

